<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>測試後台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-pO1x8UuvdUVu3g3y7Xn5Pd6h5pY2E6jP4I1NLm4nF0YXu+u6SmD1kJNN6n2lJ3x1c2wIDA5/0hrO6+7mqF9eTQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body>
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home"
                type="button" role="tab" aria-controls="pills-home" aria-selected="true">Home</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile"
                type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Profile</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact"
                type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Contact</button>
        </li>
    </ul>
    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">行程種類</th>
                        <th scope="col">名稱</th>
                        <th scope="col">地點</th>
                        <th scope="col">敘述</th>
                        <th scope="col">主頁圖片</th>
                        <th scope="col">細節圖片</th>
                        <th scope="col">最大人數</th>
                    </tr>
                </thead>
                <tbody id="data">

                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">...</div>
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module">
        const getData = async (url) => {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (err) {
                console.error('Error fetching data:', err);
                return [];
            }
        };

        const postData = async (url, params = {}) => {
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(params)
                });
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (err) {
                console.error('Error posting data:', err);
                return [];
            }
        };

        window.onload = async () => {
            const detailData = await getData('Home/tripDetails/1');

            document.getElementById('data').innerHTML = detailData.map(item => `
                <tr>
                    <th scope="row">${item.id}</th>
                    <td>${item.tripCategoryId}</td>
                    <td>${item.title}</td>
                    <td>${item.location}</td>
                    <td>${item.description}</td>
                    <td><img src="./RejoiceNew/${item.homePageImgUrl}" alt="Main Image" style="width:100px;"></td>
                    <td>${item.detailImgUrl.map(url => `<img src="${url}" alt="Detail Image" style="width:100px; margin-right:5px;">`).join('')}</td>
                    <td>${item.maxOrderPeople}</td>
                </tr>
            `).join('');

        };


    </script>
</body>

</html>